![alt text](https://travis-ci.com/vldF/VorPAL_Internship_2021.svg?token=iriKpVjXzGJpf53dxzQC&branch=master&status=created "Title")

Простой анализатор кода на Kotlin. Он использует готовые грамматики из репозитория https://github.com/Kotlin/kotlin-spec 
для antlr4.

Во время работы строится дерево, которое отображает структуру программы, необходимую для построения следующих метрик:
1. Максимальная глубина наследования
2. Средняя глубина наследования
3. Метрика ABC
4. Среднее количество переопределенных методов
5. Среднее количество полей в классе

Затем, необходимая информация собирается при помощи патерна visitor.

# Условности и допущения:
1. Вся программа представляет собой один модуль. Если в двух файлах указан пакет с одинаковым именем, 
   то их содержимое находится в одном пакете.
2. Весь код, подаваемый на вход анализатору, должен быть валидным. Невалидные синтаксически файлы будут проигнорированы 
   (с неинформативным сообщением об ошибке), невалидные семантически будут обработаны (что приведет к некорректному 
   результату). Все импорты пакетов, которые не удалось разрешить, будут проигнорированы.
3. type-alliases считаются самостоятельными классами
4. Метрика ABC считается по следующим правилам:
    * К assignment прибавляется 1 при использовании операции присваивания (в том числе операций вроде +=) за исключением 
      стандартных значений параметров и передачи именованных аргументов куда-либо
    * К branch прибавляется 1 при вызове функции или конструктора класса
    * К condition прибавляется 1 при использовании операций сравнения (==, >, === и других), инверсий, булевых операций 
      (&&, ||), else-веток (блоков if и when), try и catch, elvis-оператора.

# Использование
Необходимо передать параметр -p, содержащий путь к директории, содержащей код. Может быть передан дополнительный 
параметр -o с директорией, куда будут записаны результаты работы программы (JSON файл, содержащий информацию о 
всевозможных метриках и TXT файл, дублирующий вывод программы в терминал)

Примеры вывода программы для проектов Exposed (https://github.com/JetBrains/Exposed), KEX 
(https://github.com/vorpal-research/kex) и front-end компилятора Kotlin (https://github.com/JetBrains/kotlin)
представлен в `/reportsExample`
